!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(global,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=7)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}r.AssignHandler=function(e){var r=e.name,t=e.obj,n=e.chainLink,o=e.override,i=void 0!==o&&o;return a({},r,function(e){return i?Object.assign(t,e):t[r]=e,n})},r.CreateArray=function(e){var r=e.name,t=e.arr,n=e.chainLink;return a({},r,function(e){return t.push(e),n})},r.CreateNewObjOf=function(e){var r=e.name,t=e.obj,n=e.dependencies,o=void 0===n?{}:n;return a({},"create"+r,function e(r){return Object.assign({},t.apply(e,[r].concat(function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(o))))})},r.Method=function(e,r,t){return a({},e,function(n){return r[e][n.getObjProps().path]=n,t})},r.GetObjProps=function(e){return{getObjProps:function(){return e}}},r.Listen=function(e){return{createServer:function(){var r=e.http.createServer;return r((0,e._createHandler)().handler)},listen:function(){for(var r=arguments.length,t=Array(r),a=0;a<r;a++)t[a]=arguments[a];var o=e.http.createServer,i=e.io,s=e.socketHandler,u=e.graphqlHandler,c=e._createHandler,l=e._useSockets,p=e._version,f=e._useGraphql,d=e._Instance,h=e.print,m=e.os,v=o(c().handler);return l.useSockets?(l.io=i,s(n({server:v,args:t},e))):f.useGraphql?u(n({server:v,args:t},e)):(d.events.emit("log"),t.length>1?v.listen.apply(v,t):v.listen.apply(v,[t[0],function(){return h(["Listening on Bliz server "+p+" on port "+t[0],"Platform: "+m.platform(),"Hostname: "+m.hostname(),"Architecture: "+m.arch(),"CPU Cores: "+m.cpus().length,"Memory Free: "+(m.freemem()/m.totalmem()*100).toFixed(0)+"%, "+(m.freemem()/1024/1024).toFixed(0)+" MB / "+(m.totalmem()/1024/1024).toFixed(0)+" MB"])}]))}}},r.PrettyPrint=function(e){var r=e._useHttp,t=e._useSockets,n=e._Instance,a=e._loggerEntity,o=e.populateObjectWithTreeUtil,i=e.treeify;return{prettyPrint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log;return n.events.once("log",function(){return setImmediate(function(){o(r._routersObject,["get","post","put","del"],a.http),o(t._socketRoutersObject,["event"],a.sockets,t.delimiter),e(i.asTree(a))},0)}),n}}},r.EventsCreator=function(e){return{events:new e({wildcard:!0})}},r.CreateSwagger=function(e){var r=e._useHttp,t=e._Instance,n=e.stringify,a=e.mainDescribe,o=(e._describe,e.pathDescribe),i=e.schemas,s=e.fs;return{swagger:function(e){var u="";r.swagger=!0;var c=r._routersObject,l=r._describe;u+=n(a(l));var p=Object.keys(c),f={paths:{}},d=[],h=!0,m=!1,v=void 0;try{for(var b,g=p[Symbol.iterator]();!(h=(b=g.next()).done);h=!0){var y=c[b.value],k=function(e){var r=Object.keys(y[e]),t=function(r){var t=y.base+r,n=y[e][r].getObjProps().describe,a=n.incoming.filter(function(e){return"body"===e.in});a.length>0&&a.map(function(r){var n={},a=t.replace(/\//g,"").replace(/-/,"").replace(/[:]/g,"")+"-body-"+e;n.name=a,n.schema=Object.assign({},r.schema),d.push(n)}),n.outgoing.map(function(r){var n={},a=t.replace(/\//g,"").replace(/-/,"").replace(/[{:}]/g,"")+"-"+r.status+"-"+e;n.name=a,n.schema=Object.assign({},r.schema),d.push(n)});var i=Object.assign({},n,{method:e,path:t});Object.assign(f.paths,o(i))},n=!0,a=!1,i=void 0;try{for(var s,u=r[Symbol.iterator]();!(n=(s=u.next()).done);n=!0)t(s.value)}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}},x=!0,j=!1,O=void 0;try{for(var _,w=["get","post","put","del"][Symbol.iterator]();!(x=(_=w.next()).done);x=!0)k(_.value)}catch(e){j=!0,O=e}finally{try{!x&&w.return&&w.return()}finally{if(j)throw O}}u+=n(f),u+=n(i(d)),e&&e.absoluteFilePath&&s.writeFileSync(e.absoluteFilePath,u,"utf8")}}catch(e){m=!0,v=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw v}}return t}}},r.CreateObjectArray=function(e){var r=e.name,t=e.arr,n=e.chainLink;return a({},r,function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.push({fn:e,timeout:r,throwError:a}),n})}},function(e,r,t){"use strict";function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(r,"__esModule",{value:!0});var a=function(e){return"/"===e[e.length-1]&&e.length>1?e.slice(0,e.length-1):e};r.urlUtil=function(e,r){var t=e.split("/"),n=r.toLowerCase();"delete"===n&&(n="del");var o=t.slice(1).map(function(e){return"/"+e});return o.unshift("/"),{method:n,splitRest:o=a(o)}},r.populateRoutersUtil=function e(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={};t.map(function(t){var o=t.getObjProps();if(a[n?(""+n+o.base).replace("//","/"):o.base]=o,o.subRouters.length>0)return e(r,o.subRouters,n?n+=o.base:o.base)}),Object.assign(r,a)},r.populateUrlOptions=function(e){var r="";return e.map(function(e){return r=(r+=e).replace("//","/")})},r.handleNestedRoutersUtil=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=void 0,a=null,o=null,i=!0,s=!1,u=void 0;try{for(var c,l=e[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var p=c.value;r[p]&&(o=p,t.push(r[p].middleWareArr))}}catch(e){s=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}var f=e.indexOf(o);return(n=o)?(a=f===e.length-1?"/":(a=e[e.length-1]).substr(n.length),"/"===n&&(a="/"+a),a=a.replace("//","/")):(n="/",a="/"),{baseOfRequest:n,rest:a,combinedRoutersMids:t=t.reduce(function(e,r){return e.concat(r)},[])}},r.populateSubAppsUtil=function e(r,t,n){n.map(function(n){var a=n.getObjProps(),o=a._middleWares,i=a._routersObject;Object.assign(t,i),r.push(o);var s=a._subApps;if(s.length>0)return e(r,t,s)})},r.checkBaseUtil=a,r.populateObjectWithTreeUtil=function(e,r,t,a){var o=Object.keys(e),i=!0,s=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var p=c.value,f={},d=!0,h=!1,m=void 0;try{for(var v,b=r[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var g=v.value,y=Object.keys(e[p][g]);if(y.length>0){var k=a||g.toUpperCase(),x={},j=!0,O=!1,_=void 0;try{for(var w,S=y[Symbol.iterator]();!(j=(w=S.next()).done);j=!0){x[w.value]="";var P=n({},""+[k],x);Object.assign(f,P),t[p]=f}}catch(e){O=!0,_=e}finally{try{!j&&S.return&&S.return()}finally{if(O)throw _}}}}}catch(e){h=!0,m=e}finally{try{!d&&b.return&&b.return()}finally{if(h)throw m}}}}catch(e){s=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}},r.populateQueryUtil=function(e,r){if(r.includes("?")){r.substring(r.indexOf("?")+1).split("&").map(function(r){var t=r.split("=");e.query[t[0]]=t[1]});var t=r.substring(0,r.indexOf("?"));return a(t)}},r.populateParamsUtil=function(e,r,t,n,o){try{var i=void 0,s=!1;if("/"===o)return{canSkipBecauseParams:s,param:i};var u=Object.keys(r[t][n]),c=!0,l=!1,p=void 0;try{for(var f,d=u[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var h=f.value,m=h.split("/"),v=a(o).split("/");if(m.length===v.length){for(var b=m.length,g=0,y=0,k=m.length;y<k;y++)m[y].includes(":")?g+=1:m[y]===v[y]&&(g+=1);if(g===b){for(var x=0,j=m.length;x<j;x++)m[x].includes(":")&&(e.params[m[x].replace(":","")]=v[x],s=!0);i=h}}}}catch(e){l=!0,p=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw p}}return{param:i,canSkipBecauseParams:s}}catch(e){return{param:null,canSkipBecauseParams:!1}}},r.populateSocketRoutersUtil=function e(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments[3],o={};t.map(function(t){var i=t.getObjProps();if(o[n?""+n+a+i.base:i.base]=i,i.subRouters.length>0)return e(r,i.subRouters,n?n+=":"+i.base:i.base,a)}),Object.assign(r,o)},r.checkSubRouters=function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if((r=r.getObjProps?r.getObjProps():r).middleWareArr.length>0&&t.push(r.middleWareArr),r.subRouters.length>0)return r.subRouters.map(function(r){return e(r,t)})},r.getIntrospectSchema=function(e){var r,t,n=e.HttpLink,a=e.SubscriptionClient,o=e.fetch,i=e.ws,s=e.getMainDefinition,u=e.split,c=e.introspectSchema,l=e.makeRemoteExecutableSchema;return r=regeneratorRuntime.mark(function e(r){var t,p,f,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new n({uri:r.url,fetch:o}),p=new a(r.ws,{reconnect:!0},i),f=u(function(e){var r=e.query,t=s(r),n=t.kind,a=t.operation;return"OperationDefinition"===n&&"subscription"===a},p,t),e.next=5,c(t);case 5:return d=e.sent,h=l({schema:d,link:f}),e.abrupt("return",h);case 8:case"end":return e.stop()}},e,void 0)}),t=function(){var e=r.apply(this,arguments);return new Promise(function(r,t){return function n(a,o){try{var i=e[a](o),s=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});r(s)}("next")})},function(e){return t.apply(this,arguments)}},r.assign=function(e,r,t){for(var n=r.length-1,a=0;a<n;++a){var o=r[a];o in e||(e[o]={}),e=e[o]}e[r[n]]=t}},function(e,r){e.exports=require("graphql")},function(e,r){e.exports=require("http")},function(e,r){e.exports=require("superstruct")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a;r.resolveGraphqlOptions=(n=regeneratorRuntime.mark(function e(r){var t,n,a,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof r){e.next=13;break}for(e.prev=1,t=i.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=i[a];return e.next=5,r.apply(void 0,o(n));case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(1),new Error("Invalid options provided to ApolloServer: "+e.t0.message);case 11:e.next=14;break;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this,[[1,8]])}),a=function(){var e=n.apply(this,arguments);return new Promise(function(r,t){return function n(a,o){try{var i=e[a](o),s=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});r(s)}("next")})},function(e){return a.apply(this,arguments)});function o(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.QueryOptions=r.LogMessage=r.LogStep=r.LogAction=r.GraphQLResponse=void 0,r.LogFunction=c,r.runQuery=function(e){return Promise.resolve().then(function(){return function(e){var r=void 0,t=e.logFunction||function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r},c=void 0!==e.debug&&e.debug;t({action:s.request,step:u.start});var f=e.context||{},d=[];e.tracing&&d.push(o.TracingExtension);!0===e.cacheControl?d.push(i.CacheControlExtension):e.cacheControl&&d.push(new i.CacheControlExtension(e.cacheControl));var h=d.length>0&&new a.GraphQLExtensionStack(d);h&&(f._extensionStack=h,(0,a.enableGraphQLExtensions)(e.schema),h.requestDidStart());var m="string"==typeof e.query?e.query:(0,n.print)(e.query);if(t({action:s.request,step:u.status,key:"query",data:m}),t({action:s.request,step:u.status,key:"variables",data:e.variables}),t({action:s.request,step:u.status,key:"operationName",data:e.operationName}),"string"==typeof e.query)try{t({action:s.parse,step:u.start}),r=(0,n.parse)(e.query),t({action:s.parse,step:u.end})}catch(r){return t({action:s.parse,step:u.end}),Promise.resolve({errors:p([r],e.formatError)})}else{r=e.query;var v=n.specifiedRules;e.validationRules&&(v=v.concat(e.validationRules)),t({action:s.validation,step:u.start});var b=(0,n.validate)(e.schema,r,v);if(t({action:s.validation,step:u.end}),b.length)return Promise.resolve({errors:p(b,e.formatError)});h&&h.executionDidStart()}try{return t({action:s.execute,step:u.start}),Promise.resolve((0,n.execute)(e.schema,r,e.rootValue,f,e.variables,e.operationName,e.fieldResolver)).then(function(r){t({action:s.execute,step:u.end}),t({action:s.request,step:u.end});var n={data:r.data};return r.errors&&(n.errors=p(r.errors,e.formatError),c&&r.errors.map(l)),h&&(h.executionDidEnd(),h.requestDidEnd(),n.extensions=h.format()),e.formatResponse&&(n=e.formatResponse(n,e)),n})}catch(r){return t({action:s.execute,step:u.end}),t({action:s.request,step:u.end}),Promise.resolve({errors:p([r],e.formatError)})}}(e)})};var n=t(2),a=t(31),o=t(30),i=t(29),s=(r.GraphQLResponse={data:{},errors:[],extensions:{}},r.LogAction={request:"",parse:"",validation:"",execute:""}),u=r.LogStep={start:"",end:"",status:""};r.LogMessage={action:s,step:u,key:"",data:{}};function c(e){}r.QueryOptions={schema:{},query:"",rootValue:{},context:{},variables:{},operationName:"",logFunction:c,validationRules:[],fieldResolver:{},formatError:Function,formatResponse:Function,debug:!1,tracing:!1,cacheControl:!1};function l(e){console.error(e.stack)}function p(e,r){return e.map(function(e){if(void 0===r)return(0,n.formatError)(e);try{return r(e)}catch(e){console.error("Error in formatError function:",e);var t=new Error("Internal server error");return(0,n.formatError)(t)}})}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StructError=r.superstruct=r.struct=r.response=r.request=void 0;var n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};t(49);var a=W(t(48)),o=W(t(47)),i=W(t(46)),s=W(t(45)),u=W(t(44)),c=W(t(43)),l=W(t(42)),p=t(40),f=W(p),d=W(t(39)),h=W(t(38)),m=W(t(37)),v=W(t(36)),b=W(t(35)),g=t(34),y=t(26),k=t(1),x=I(k),j=W(t(25)),O=t(24),_=t(23),w=t(22),S=t(2),P=t(21),q=W(t(20)),R=t(19),E=I(t(0)),A=W(t(18)),H=t(17),M=W(t(16)),L=W(t(3)),C=W(t(15)),Q=W(t(14)),G=t(4),T=W(t(13)),D=W(t(12)),U=t(11),B=W(t(10)),N=W(t(9)),F=W(t(8));function I(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function W(e){return e&&e.__esModule?e:{default:e}}var z={RouterCreator:o.default,PathCreator:i.default,defaultHandler:s.default,CreateHandler:u.default,request:c.default,response:l.default,midHandler:f.default,pathDescribe:H.pathDescribe,mainDescribe:H.mainDescribe,schemas:H.schemas},J={GraphQlCreator:v.default,graphqlExpress:g.graphqlExpress,graphiqlExpress:g.graphiqlExpress,graphqlHandler:b.default,SubscriptionServer:w.SubscriptionServer,execute:S.execute,subscribe:S.subscribe,PubSub:P.PubSub,mergeSchemas:y.mergeSchemas,makeRemoteExecutableSchema:y.makeRemoteExecutableSchema,getIntrospectSchema:k.getIntrospectSchema,fetch:q.default,introspectSchema:y.introspectSchema,createHttpLink:R.createHttpLink,HttpLink:R.HttpLink,SubscriptionClient:w.SubscriptionClient,ws:j.default,getMainDefinition:_.getMainDefinition,split:O.split},V={SocketListenerCreator:h.default,SocketRouterCreator:d.default,socketMiddlewareHandler:p.socketMiddlewareHandler,socketHandler:m.default},Y={struct:G.struct,superstruct:G.superstruct,StructError:G.StructError},$={bodyParser:M.default,http:L.default,io:F.default,makeExecutableSchema:y.makeExecutableSchema,fs:C.default,treeify:Q.default,EventEmitter:T.default,Promise:D.default,stringify:U.stringify,print:B.default,os:N.default,packgeJson:a.default,RegisterRouters:A.default},K=n({},x,E,z,J,V,$,{superStructObject:Y});r.default=function(){return Object.assign({},function(e){var r={_version:e.packgeJson.version,_Instance:{},_injected:{},_options:{},_loggerEntity:{sockets:{},http:{}}},t={useSockets:!1,delimiter:":",_socketRoutersObject:{},_socketMiddlewares:[],_socketSubApps:[]},a={useGraphql:!1,graphqlRoute:"/graphql",graphiqlRoute:"/graphiql",_graphQlRemoteEndpoints:[],_graphQlExecutableSchema:null,_graphQlSchemas:{},_graphQlDirectives:[],_graphQlEnums:[],subscriptionsEndpoint:"/subscriptions",useGraphiql:!0,logger:{log:function(e){return console.log("Error from graphql: ",e)}},directiveResolvers:{},tracing:!0,cacheControl:{defaultMaxAge:5}},s={useSwagger:!1,_middleWares:[],_routersObject:{},_describe:{},_subApps:[]},c={_useSockets:t,_useGraphql:a,_useHttp:s},l=u.default.bind(void 0,n({},e,s)),p=r._Instance,f=r._options,m=r._injected,b=r._loggerEntity,g=r._version;return Object.assign(p,e.CreateNewObjOf({name:"GraphQlSchema",obj:v.default}),e.CreateNewObjOf({name:"SocketRouter",obj:d.default,dependencies:n({},e)}),e.CreateNewObjOf({name:"SocketListener",obj:h.default,dependencies:n({},e)}),e.CreateNewObjOf({name:"Router",obj:o.default,dependencies:n({},e)}),e.CreateNewObjOf({name:"Path",obj:i.default,dependencies:n({},e)}),e.AssignHandler({name:"sockets",obj:t,chainLink:p,override:!0}),e.AssignHandler({name:"graphql",obj:a,chainLink:p,override:!0}),e.AssignHandler({name:"describe",obj:s._describe,chainLink:p,override:!0}),e.AssignHandler({name:"options",obj:f,chainLink:p,override:!0}),e.AssignHandler({name:"inject",obj:m,chainLink:p,override:!0}),e.CreateObjectArray({name:"middleware",arr:s._middleWares,chainLink:p}),e.CreateObjectArray({name:"socketMiddleware",arr:t._socketMiddlewares,chainLink:p}),e.CreateArray({name:"subApp",arr:s._subApps,chainLink:p}),e.CreateArray({name:"enum",arr:a._graphQlEnums,chainLink:p}),e.CreateArray({name:"directive",arr:a._graphQlDirectives,chainLink:p}),e.CreateSwagger(n({},c,e,{_Instance:p})),e.PrettyPrint(n({},c,e,{_Instance:p,_loggerEntity:b})),e.RegisterRouters(n({},c,e,{_Instance:p})),e.EventsCreator(e.EventEmitter),e.GetObjProps(c),e.Listen(n({_createHandler:l},c,e,{_Instance:p,_version:g,_injected:m})))}(K))},r.request=c.default,r.response=l.default,r.struct=G.struct,r.superstruct=G.superstruct,r.StructError=G.StructError},function(e,r){e.exports=require("socket.io")},function(e,r){e.exports=require("os")},function(e,r){e.exports=require("print-message")},function(e,r){e.exports=require("json-to-pretty-yaml")},function(e,r){e.exports=require("bluebird")},function(e,r){e.exports=require("eventemitter2")},function(e,r){e.exports=require("treeify")},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("body-parser")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mainDescribe=r.schemas=r.pathDescribe=void 0;var n=t(4),a=t(1);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var i=(0,n.struct)({name:"string?",email:"string?",url:"string?"}),s=(0,n.struct)({name:"string?",url:"string?"}),u=(0,n.struct)({url:"string?",description:"string?"}),c=(0,n.struct)({title:"string",version:"string",description:"string?",termsOfService:"string?",contact:i,license:s}),l=(0,n.struct)({openapi:"string",security:"array?",info:c,servers:[u]}),p=(0,n.struct)({tags:["string"],description:"string",parameters:"array?",requestBody:"object?",summary:"string?",responses:"object?"}),f=function(e,r){return(0,n.struct)(o({},e,function(e){return(0,n.struct)(o({},"del"===e?"delete":e,p))}(r)))},d=function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.schema&&r.schema.schema||r.schema,o=Object.keys(n),i=!0,s=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var p=c.value;if(n[p].kind&&"object"===n[p].kind){var f=e(n[p],{});(0,a.assign)(t,[p,"type"],"object"),(0,a.assign)(t,[p,"properties"],f)}else if(n[p].kind&&"list"===n[p].kind){(0,a.assign)(t,[p,"type"],"array");var d=n[p].type.replace(/\[|\]/g,"");(0,a.assign)(t,[p,"items","type"],d.replace("?",""))}else if(n[p].kind&&"enum"===n[p].kind)(0,a.assign)(t,[p,"type"],"string"),(0,a.assign)(t,[p,"enum"],n[p].type.split("|").map(function(e){return e.replace(/\"/g,"").replace(/\s/g,"")}));else if(n[p].kind&&"scalar"===n[p].kind)(0,a.assign)(t,[p],n[p].type);else if(n[p].kind&&"dict"===n[p].kind){(0,a.assign)(t,[p,"type"],"object");var h=n[p].type.replace(/dict\<|\>/g,"");(0,a.assign)(t,[p,"type"],h.substring(h.indexOf(",")+1))}else if(n[p].kind&&"function"===n[p].kind);else if(n[p].kind&&"instance"===n[p].kind);else if(n[p].kind&&"interface"===n[p].kind);else if(n[p].kind&&"intersection"===n[p].kind){var m=n[p].type.split("&").map(function(e){return e.replace(/\s/g,"")}).map(function(e){return"type: "+e});(0,a.assign)(t,[p,"allOf"],m)}else if(n[p].kind&&"literal"===n[p].kind);else if(n[p].kind&&"lazy"===n[p].kind);else if(n[p].kind&&"tuple"===n[p].kind);else if(n[p].kind&&"union"===n[p].kind){var v=n[p].type.split("|").map(function(e){return e.replace(/\s/g,"")}).map(function(e){return"type: "+e});(0,a.assign)(t,[p,"anyOf"],v)}else(0,a.assign)(t,[p,"type"],n[p].replace("?","")),"array"===n[p]&&(0,a.assign)(t,[p,"items","type"],"object")}}catch(e){s=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}return t};r.pathDescribe=function(e){var r=e.path,t=e.method,n=e.tags,a=e.description,i=e.summary,s=e.incoming,u=(e.requestBody,e.outgoing),c=r.replace(/(:.+?)([\/]|$)/g,function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r[0].replace(r[1],"{"+r[1].replace(":","")+"}")}),l=s.filter(function(e){return"body"===e.in}),p=s.filter(function(e){return["path","query"].includes(e.in)}),h=f(c,t),m=p.map(function(e){var r=[],t=d(e,{}),n=Object.keys(t),a=!0,o=!1,i=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value,l={};l.name=c,l.in=e.in,l.required=!t[c].type.includes("?"),l.schema={},l.schema.type=t[c].type.replace("?",""),r.push(l)}}catch(e){o=!0,i=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw i}}return r}).reduce(function(e,r){return e.concat(r)},[]);return h(o({},c,o({},"del"===t?"delete":t,{tags:n,description:a,summary:i,requestBody:function(e,r,t){if(e)return{content:o({},e.contentType||"application/json",{schema:{$ref:"#/components/schemas/"+r.replace(/\//g,"").replace(/-/,"").replace(/[{|}]/g,"")+"-body-"+t}})}}(l[0],c,t),parameters:m.length>0?m:void 0,responses:function(e,r,t){var n={},a=!0,i=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;n[l.status]={description:""+l.status,content:o({},l.contentType||"application/json",{schema:{$ref:"#/components/schemas/"+r.replace(/\//g,"").replace(/-/,"").replace(/[{|}]/g,"")+"-"+l.status+"-"+t}})}}}catch(e){i=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw s}}return n}(u,c,t)})))},r.schemas=function(e,r){var t={},n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value,c=d(u);t[u.name]=c[Object.keys(c)[0]]}}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return{components:{securitySchemes:r,schemas:t}}},r.mainDescribe=function(e){var r=e.title,t=e.version,n=e.description,a=e.termsOfService,o=e.contact,i=e.license,s=e.servers,u=e.security;return l({openapi:"3.0.0",security:u,info:{title:r,version:t,description:n,termsOfService:a,contact:o,license:i},servers:s})}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=function(e){var r=e._useGraphql,t=e._useHttp,n=(e._injected,e._useSockets),a=e._Instance,o=e.populateSubAppsUtil,i=e.populateRoutersUtil,s=e.populateSocketRoutersUtil;return{registerRouters:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=t._middleWares,u=t._routersObject,c=t._subApps;return o(s,u,c),i(u,r),a},registerSocketRouters:function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];var o=n._socketRoutersObject,i=n.delimiter;return s(o,r,null,i),a},registerGraphQlSchemas:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(r._graphQlRemoteEndpoints.length>0)throw new Error("you may only registerGraphQlSchemas or registerRemoteGraphQlSchemas, not either");return Object.assign(r._graphQlSchemas,{schemas:t}),a},registerRemoteGraphQlSchemas:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Object.keys(r._graphQlSchemas).length>0)throw new Error("you may only registerGraphQlSchemas or registerRemoteGraphQlSchemas, not either");return r._graphQlRemoteEndpoints=t,a}}}},function(e,r){e.exports=require("apollo-link-http")},function(e,r){e.exports=require("node-fetch")},function(e,r){e.exports=require("graphql-subscriptions")},function(e,r){e.exports=require("subscriptions-transport-ws")},function(e,r){e.exports=require("apollo-utilities")},function(e,r){e.exports=require("apollo-client-preset")},function(e,r){e.exports=require("ws")},function(e,r){e.exports=require("graphql-tools")},function(e,r){e.exports=require("apollo-server-module-graphiql")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.runHttpQuery=r.HttpQueryError=void 0;r.runHttpQuery=(n=regeneratorRuntime.mark(function e(r,t){var n,a,o,f,d,h,m,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,a=void 0,e.prev=2,e.next=5,u.resolveGraphqlOptions.apply(void 0,[t.options].concat(c(r)));case 5:a=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new l(500,e.t0.message);case 11:o=a.formatError||i.formatError,f=void 0,e.t1=t.method,e.next="POST"===e.t1?16:"GET"===e.t1?20:25;break;case 16:if(t.query&&0!==Object.keys(t.query).length){e.next=18;break}throw new l(500,"POST body missing. Did you forget use body-parser middleware?");case 18:return f=t.query,e.abrupt("break",26);case 20:if(t.query&&0!==Object.keys(t.query).length){e.next=22;break}throw new l(400,"GET query missing.");case 22:return n=!0,f=t.query,e.abrupt("break",26);case 25:throw new l(405,"Apollo Server supports only GET/POST requests.",!1,{Allow:"GET, POST"});case 26:return d=!0,Array.isArray(f)||(d=!1,f=[f]),h=f.map(function(e){try{var r=e.query,t=e.extensions;if(n&&t)try{t=JSON.parse(t)}catch(e){throw new l(400,"Extensions are invalid JSON.")}if(void 0===r&&t&&t.persistedQuery)throw new l(200,JSON.stringify({errors:[{message:"PersistedQueryNotSupported"}]}),!0,{"Content-Type":"application/json"});if(n){if("string"==typeof r)r=(0,i.parse)(r);else if(!r)throw new l(400,"Must provide query string.");if(!p(r,e.operationName))throw new l(405,"GET supports only query operation",!1,{Allow:"POST"})}var u=e.operationName,c=e.variables;if("string"==typeof c)try{c=JSON.parse(c)}catch(e){throw new l(400,"Variables are invalid JSON.")}var f=a.context||{};"function"==typeof f?f=f():d&&(f=Object.assign(Object.create(Object.getPrototypeOf(f)),f));var h={schema:a.schema,query:r,variables:c,context:f,rootValue:a.rootValue,operationName:u,logFunction:a.logFunction,validationRules:a.validationRules,formatError:o,formatResponse:a.formatResponse,fieldResolver:a.fieldResolver,debug:a.debug,tracing:a.tracing,cacheControl:a.cacheControl};return a.formatParams&&(h=a.formatParams(h)),(0,s.runQuery)(h)}catch(e){return"HttpQueryError"===e.name?Promise.reject(e):Promise.resolve({errors:[o(e)]})}}),e.next=31,Promise.all(h);case 31:if(m=e.sent,d){e.next=37;break}if(!(v=m[0]).errors||void 0!==v.data){e.next=36;break}throw new l(400,JSON.stringify(v),!0,{"Content-Type":"application/json"});case 36:return e.abrupt("return",JSON.stringify(v));case 37:return e.abrupt("return",JSON.stringify(m));case 38:case"end":return e.stop()}},e,this,[[2,8]])}),a=function(){var e=n.apply(this,arguments);return new Promise(function(r,t){return function n(a,o){try{var i=e[a](o),s=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});r(s)}("next")})},function(e,r){return a.apply(this,arguments)});var n,a,o,i=t(2),s=t(6),u=t(5);(o=u)&&o.__esModule;function c(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}var l=r.HttpQueryError=function(e){function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments[3];!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r);var o=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return o.name="HttpQueryError",o.statusCode=e,o.isGraphQLError=n,o.headers=a,o}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,Error),r}();function p(e,r){return"query"===(0,i.getOperationAST)(e,r).operation}},function(e,r){e.exports=require("apollo-cache-control")},function(e,r){e.exports=require("apollo-tracing")},function(e,r){e.exports=require("graphql-extensions")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(6);Object.defineProperty(r,"runQuery",{enumerable:!0,get:function(){return n.runQuery}}),Object.defineProperty(r,"LogFunction",{enumerable:!0,get:function(){return n.LogFunction}}),Object.defineProperty(r,"LogMessage",{enumerable:!0,get:function(){return n.LogMessage}}),Object.defineProperty(r,"LogStep",{enumerable:!0,get:function(){return n.LogStep}}),Object.defineProperty(r,"LogAction",{enumerable:!0,get:function(){return n.LogAction}});var a=t(28);Object.defineProperty(r,"runHttpQuery",{enumerable:!0,get:function(){return a.runHttpQuery}}),Object.defineProperty(r,"HttpQueryError",{enumerable:!0,get:function(){return a.HttpQueryError}});var o=t(5);Object.defineProperty(r,"resolveGraphqlOptions",{enumerable:!0,get:function(){return o.resolveGraphqlOptions}})},function(e,r){e.exports=require("url")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.graphqlExpress=function(e){if(!e)throw new Error("Apollo Server requires options.");if(arguments.length>1)throw new Error("Apollo Server expects exactly one argument, got "+arguments.length);return function(r,t){(0,a.runHttpQuery)([r,t],{method:r.method,options:e,query:"POST"===r.method?r.body:r.query}).then(function(e){t.setHeader("Content-Type","application/json"),t.setHeader("Content-Length",Buffer.byteLength(e,"utf8").toString()),t.write(e),t.end()},function(e){e.headers&&Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])}),t.statusCode=e.statusCode||500,t.write(e.message),t.end()})}},r.graphiqlExpress=function(e){return function(r,t){var a=r.url&&n.parse(r.url,!0).query;o.resolveGraphiQLString(a,e,r).then(function(e){t.setHeader("Content-Type","text/html"),t.write(e),t.end()},function(e){throw e})}};var n=i(t(33)),a=t(32),o=i(t(27));function i(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}},function(e,r,t){"use strict";function n(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function a(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function n(a,o){try{var i=r[a](o),s=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var e=a(regeneratorRuntime.mark(function e(r){var t,o,i,s,u,c,l,p,f,d,h,m,v,b,g,y,k,x,j,O=this,_=r.server,w=r.args,S=r._useGraphql,P=(r._internal,r.PubSub),q=r.makeExecutableSchema,R=r.getIntrospectSchema,E=(r.createHttpLink,r.HttpLink),A=r.fetch,H=r.introspectSchema,M=r.makeRemoteExecutableSchema,L=r.mergeSchemas,C=r.bodyParser,Q=r.graphiqlExpress,G=r.graphqlExpress,T=r.SubscriptionServer,D=r.SubscriptionClient,U=r.ws,B=r.getMainDefinition,N=r.split,F=r.os,I=r.print,W=r.execute,z=r.subscribe,J=r.Promise,V=r._injected,Y=r._Instance,$=r._version;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,(o=S._graphQlDirectives).length===Object.keys(S.directiveResolvers).length){e.next=4;break}throw new Error("Directive resolvers registered does not match directive declarations");case 4:if(i=S._graphQlEnums,s=S._graphQlSchemas.schemas,u=S.pubsub||new P,c={schema:t,logger:S.logger,context:Object.assign({},V,{pubsub:u}),tracing:S.tracing,cacheControl:S.cacheControl,directiveResolvers:S.directiveResolvers},0!==S._graphQlRemoteEndpoints.length){e.next=12;break}S._graphQlExecutableSchema?t=S._graphQlExecutableSchema:(l="",p="type Query{\n",f="type Mutation{\n",d="type Subscription{\n",h="",m="",v={Query:{},Mutation:{},Subscription:{}},i.map(function(e){m+="enum "+e.name+"{\n"+e.options.map(function(e){return"\t"+e+"\n"}).join("")+"}\n"}),o.map(function(e){l+=e.includes("directive")?e+"\n":"directive "+e+"\n"}),s.map(function(e){var r=e.getObjProps();if(p+="\t"+r.query+"\n",f+="\t"+r.mutation+"\n",d+="\t"+r.subscription+"\n",h+=r.type+"\n",r.resolver){var t=r.resolver,a=t.Query,o=t.Mutation,i=t.Subscription,s=n(t,["Query","Mutation","Subscription"]);a&&Object.assign(v.Query,"function"==typeof a?a(u):a),o&&Object.assign(v.Mutation,"function"==typeof o?o(u):o),i&&Object.assign(v.Subscription,"function"==typeof i?i(u):i),Object.assign(v,s)}}),b=l+"\n"+m+"\n"+h+"\n"+(p+="}")+"\n"+(f+="}")+"\n"+(d+="}"),c.rootValue=v,t=q({typeDefs:b,resolvers:v,directiveResolvers:S.directiveResolvers}),S._graphQlExecutableSchema=t),e.next=24;break;case 12:if(g=R({HttpLink:E,fetch:A,SubscriptionClient:D,ws:U,getMainDefinition:B,split:N,introspectSchema:H,makeRemoteExecutableSchema:M}),!S.allowPartialRemoteSchema){e.next=19;break}return e.next=16,J.map(S._graphQlRemoteEndpoints,function(){var e=a(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),S.logger.log(e.t0);case 9:case"end":return e.stop()}},e,O,[[0,6]])}));return function(r){return e.apply(this,arguments)}}()).filter(function(e){return void 0!==e});case 16:t=e.sent,e.next=22;break;case 19:return e.next=21,J.all(S._graphQlRemoteEndpoints.map(function(e){return g(e)}));case 21:t=e.sent;case 22:t=L({schemas:t}),S._graphQlExecutableSchema=t;case 24:if(y=Y.createRouter("/").middleware(C.json()),S.useGraphiql&&(k=Y.createPath(S.graphiqlRoute).handler(Q({endpointURL:S.graphqlRoute,subscriptionsEndpoint:"ws://localhost:"+w[0]+S.subscriptionsEndpoint})),y.get(k)),c.schema=t,x=Y.createPath(S.graphqlRoute).handler(G(function(e){return Object.assign(c.context,{headers:e.headers,body:e.body}),c})),y.get(x).post(x),Y.registerRouters(y),Y.events.emit("log"),!(w.length>1)){e.next=37;break}return j=j.listen.apply(j,w),T.create({execute:W,subscribe:z,schema:S._graphQlExecutableSchema},{server:j,path:S.subscriptionsEndpoint}),e.abrupt("return",j);case 37:return _.listen.apply(_,[w[0],function(){return I(["Listening on Bliz server "+$+" on port "+w[0],"Platform: "+F.platform(),"Hostname: "+F.hostname(),"Architecture: "+F.arch(),"CPU Cores: "+F.cpus().length,"Memory Free: "+(F.freemem()/1024/1024/(F.totalmem()/1024/1024)*100).toFixed(0)+"%, "+(F.freemem()/1024/1024).toFixed(0)+" MB / "+(F.totalmem()/1024/1024).toFixed(0)+" MB"])}]),T.create({execute:W,subscribe:z,schema:S._graphQlExecutableSchema},{server:_,path:S.subscriptionsEndpoint}),e.abrupt("return",_);case 40:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0);r.default=function(e){var r={},t={type:e,resolver:{},mutation:"",subscription:"",mockSchema:null,query:""};return Object.assign(r,(0,n.AssignHandler)({name:"resolver",obj:t.resolver,chainLink:r,override:!0}),(0,n.AssignHandler)({name:"mockSchema",obj:t,chainLink:r}),(0,n.AssignHandler)({name:"mutation",obj:t,chainLink:r}),(0,n.AssignHandler)({name:"subscription",obj:t,chainLink:r}),(0,n.AssignHandler)({name:"query",obj:t,chainLink:r}),(0,n.GetObjProps)(t))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=function(e){var r=e._useSockets,t=e._Instance,n=e._injected,a=e.server,o=e._version,i=e.args,s=e.os,u=e.print,c=e.socketMiddlewareHandler,l=e.checkSubRouters,p=r.io(a);return i.length>1?a.listen.apply(a,i):a.listen.apply(a,[i[0],function(){return u(["Listening on Bliz server "+o+" on port "+i[0],"Platform: "+s.platform(),"Hostname: "+s.hostname(),"Architecture: "+s.arch(),"CPU Cores: "+s.cpus().length,"Memory Free: "+(s.freemem()/1024/1024/(s.totalmem()/1024/1024)*100).toFixed(0)+"%, "+(s.freemem()/1024/1024).toFixed(0)+" MB / "+(s.totalmem()/1024/1024).toFixed(0)+" MB"])}]),p.on("connection",function(e){var t=Object.keys(r._socketRoutersObject),a=function(t){var a=Object.keys(r._socketRoutersObject[t].event),o=function(a){var o,i;e.on(""+t+r.delimiter+a,(o=regeneratorRuntime.mark(function o(i,s){var u,f;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,u=r._socketRoutersObject[t].event[a].getObjProps(),!(r._socketMiddlewares&&r._socketMiddlewares.length>0)){o.next=5;break}return o.next=5,c(Promise,p,e,i,s,r._socketMiddlewares);case 5:if(f=[],t.split(r.delimiter).map(function(e){return r._socketRoutersObject[e]?l(r._socketRoutersObject[e],f):void 0}),!((f=f.reduce(function(e,r){return e.concat(r)}))&&f.length>0)){o.next=11;break}return o.next=11,c(Promise,p,e,i,s,f);case 11:if(!(u.middleWareArr&&u.middleWareArr.length>0)){o.next=14;break}return o.next=14,c(Promise,p,e,i,s,u.middleWareArr);case 14:return o.next=16,u.handler(p,e,i,s,n);case 16:o.next=21;break;case 18:o.prev=18,o.t0=o.catch(0),console.log(o.t0);case 21:case"end":return o.stop()}},o,void 0,[[0,18]])}),i=function(){var e=o.apply(this,arguments);return new Promise(function(r,t){return function n(a,o){try{var i=e[a](o),s=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});r(s)}("next")})},function(e,r){return i.apply(this,arguments)}))},i=!0,s=!1,u=void 0;try{for(var f,d=a[Symbol.iterator]();!(i=(f=d.next()).done);i=!0)o(f.value)}catch(e){s=!0,u=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw u}}},o=!0,i=!1,s=void 0;try{for(var u,f=t[Symbol.iterator]();!(o=(u=f.next()).done);o=!0)a(u.value)}catch(e){i=!0,s=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw s}}e.on("disconnect",function(){})}),t.events.emit("log"),p}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0);r.default=function(e){var r={},t={middleWareArr:[],path:e,handler:null,errHandler:null};return Object.assign(r,(0,n.CreateObjectArray)({name:"middleware",arr:t.middleWareArr,chainLink:r}),(0,n.AssignHandler)({name:"handler",obj:t,chainLink:r}),(0,n.AssignHandler)({name:"errHandler",obj:t,chainLink:r}),(0,n.GetObjProps)(t))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0);r.default=function(e){var r={},t={base:e,event:{},middleWareArr:[],subRouters:[],routerErrorHandler:null};return Object.assign(r,(0,n.Method)("event",t,r),(0,n.AssignHandler)({name:"routerErrorHandler",obj:t,chainLink:r}),(0,n.CreateObjectArray)({name:"middleware",arr:t.middleWareArr,chainLink:r}),(0,n.CreateArray)({name:"socketSubRouter",arr:t.subRouters,chainLink:r}),(0,n.GetObjProps)(t))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a,o=(n=s(regeneratorRuntime.mark(function e(r,t,n,a){var o,i,s,l,p,f,d,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=regeneratorRuntime.mark(function e(a){var o,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.fn,i=a.timeout,s=a.throwError,l=new r(function(e,r){return o(t,n,u.bind(h,e,r))}),e.next=4,c(l,i,s);case 4:e.sent;case 5:case"end":return e.stop()}},e,h)}),i=!0,s=!1,l=void 0,e.prev=4,p=a[Symbol.iterator]();case 6:if(i=(f=p.next()).done){e.next=12;break}return d=f.value,e.delegateYield(o(d),"t0",9);case 9:i=!0,e.next=6;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),s=!0,l=e.t1;case 18:e.prev=18,e.prev=19,!i&&p.return&&p.return();case 21:if(e.prev=21,!s){e.next=24;break}throw l;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,this,[[4,14,18,26],[19,,21,25]])})),function(e,r,t,a){return n.apply(this,arguments)}),i=(a=s(regeneratorRuntime.mark(function e(r,t,n,a,o,i){var s,l,p,f,d,h,m,v=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=regeneratorRuntime.mark(function e(i){var s,l,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=i.fn,l=i.timeout,p=i.throwError,f=new r(function(e,r){return s(t,n,a,o,u.bind(v,e,r))}),e.next=4,c(f,l,p);case 4:case"end":return e.stop()}},e,v)}),l=!0,p=!1,f=void 0,e.prev=4,d=i[Symbol.iterator]();case 6:if(l=(h=d.next()).done){e.next=12;break}return m=h.value,e.delegateYield(s(m),"t0",9);case 9:l=!0,e.next=6;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),p=!0,f=e.t1;case 18:e.prev=18,e.prev=19,!l&&d.return&&d.return();case 21:if(e.prev=21,!p){e.next=24;break}throw f;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,this,[[4,14,18,26],[19,,21,25]])})),function(e,r,t,n,o,i){return a.apply(this,arguments)});function s(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function n(a,o){try{var i=r[a](o),s=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}function u(e,r){return(arguments.length<=2?0:arguments.length-2)>0?r(arguments.length<=2?void 0:arguments[2]):e()}var c=function(e,r,t){var n=new Promise(function(e,n){var a=setTimeout(function(){clearTimeout(a);var o=new Error("Timed out in "+r+"ms.");t?n(o):e("Timed out in "+r+"ms.")},r)});return Promise.race([e,n])};r.socketMiddlewareHandler=i,r.default=o},function(e,r){e.exports=require("etag")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=o(t(3)),a=o(t(41));function o(e){return e&&e.__esModule?e:{default:e}}var i=Object.create(n.default.ServerResponse.prototype);i.status=function(e){return this.statusCode=e,this},i.json=function(e){this.setHeader("Content-Type","application/json"),this.setHeader("X-Powered-By","Bliz");var r=JSON.stringify(e,null,3),t=(0,a.default)(r);this.setHeader("ETag",t),this.end(r)},r.default=i},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=t(3),o=(n=a)&&n.__esModule?n:{default:n};var i=Object.create(o.default.IncomingMessage.prototype);r.default=i},function(e,r,t){"use strict";function n(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){return function n(a,o){try{var i=r[a](o),s=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var r,t=(r=n(regeneratorRuntime.mark(function e(r,t,n){var b,g,y,k,x,j,O,_,w,S,P,q,R,E,A,H,M,L,C,Q,G,T,D,U,B;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.__proto__=a,t.__proto__=o,o.req=r,a.res=t,r.params||(r.params={}),r.query||(r.query={}),b=u(r.url,r.method),g=b.method,y=b.splitRest,k=f(y),x=c(k,h),j=x.baseOfRequest,O=x.rest,_=x.combinedRoutersMids,w=p(r,O)||O,S=l(r,h,j,g,w),P=S.param,q=S.canSkipBecauseParams,e.prev=11,!d){e.next=15;break}return e.next=15,s(v,r,t,d);case 15:if(!_){e.next=18;break}return e.next=18,s(v,r,t,_);case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(11),e.abrupt("return",i(r,t,e.t0));case 23:if(q){e.next=30;break}if(h[j]){e.next=26;break}return e.abrupt("return",i(r,t));case 26:if(h[j][g]){e.next=28;break}return e.abrupt("return",i(r,t));case 28:if(h[j][g][w]){e.next=30;break}return e.abrupt("return",i(r,t));case 30:if(R=h[j][g][q?P:w].getObjProps(),e.prev=31,E=R.middleWareArr,A=R.describe,H=R.handler,!(E&&E.length>0)){e.next=36;break}return e.next=36,s(v,r,t,E);case 36:if(A&&A.incoming&&A.incoming.length>0)for(M=0;M<A.incoming.length;M++)L="",L="path"===A.incoming[M].in?"params":A.incoming[M].in,A.incoming[M].schema(r[L]);if(!(A&&A.incoming&&A.incoming.length>0)){e.next=59;break}for(C={},Q=!0,G=!1,T=void 0,e.prev=42,D=A.outgoing[Symbol.iterator]();!(Q=(U=D.next()).done);Q=!0)B=U.value,C[B.status]=B.schema;e.next=50;break;case 46:e.prev=46,e.t1=e.catch(42),G=!0,T=e.t1;case 50:e.prev=50,e.prev=51,!Q&&D.return&&D.return();case 53:if(e.prev=53,!G){e.next=56;break}throw T;case 56:return e.finish(53);case 57:return e.finish(50);case 58:Object.assign(t,{schema:C});case 59:return e.next=61,H(r,t,m);case 61:e.next=66;break;case 63:e.prev=63,e.t2=e.catch(31);try{R.errHandler?R.errHandler(r,t,e.t2):h[j].routerErrorHandler?h[j].routerErrorHandler(r,t,e.t2):i(r,t,e.t2)}catch(e){i(r,t,e)}case 66:case"end":return e.stop()}},e,this,[[11,20],[31,63],[42,46,50,58],[51,,53,57]])})),function(e,t,n){return r.apply(this,arguments)}),a=e.request,o=e.response,i=e.defaultHandler,s=e.midHandler,u=e.urlUtil,c=e.handleNestedRoutersUtil,l=e.populateParamsUtil,p=e.populateQueryUtil,f=e.populateUrlOptions,d=e._middleWares,h=e._routersObject,m=e._injected,v=(e._Instance,e.Promise);return d=d.reduce(function(e,r){return e.concat(r)},[]),{handler:t}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(7);r.default=function(e,r,t){t?(r.statusCode=t.status||500,t instanceof n.StructError?r.json({error:t.message,path:t.path,dataPassed:t.data,valueReceived:t.value,typeExpected:t.type}):(console.error(t),r.json({error:t.message}))):(r.statusCode=404,r.json({error:e.method.toUpperCase()+" - "+e.url+" not found..."}))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),a=t(1);r.default=function(e){var r={},t={middleWareArr:[],path:(0,a.checkBaseUtil)(e),describe:{},handler:null,errHandler:null,parent:null};return Object.assign(r,(0,n.AssignHandler)({name:"describe",obj:t.describe,chainLink:r,override:!0}),(0,n.AssignHandler)({name:"parent",obj:t.parent,chainLink:r,override:!0}),(0,n.CreateObjectArray)({name:"middleware",arr:t.middleWareArr,chainLink:r}),(0,n.AssignHandler)({name:"handler",obj:t,chainLink:r}),(0,n.AssignHandler)({name:"errHandler",obj:t,chainLink:r}),(0,n.GetObjProps)(t))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),a=t(1);r.default=function(e){var r={},t={base:(0,a.checkBaseUtil)(e),get:{},post:{},put:{},del:{},middleWareArr:[],subRouters:[],routerErrorHandler:null};return Object.assign(r,(0,n.Method)("get",t,r),(0,n.Method)("post",t,r),(0,n.Method)("put",t,r),(0,n.Method)("del",t,r),(0,n.AssignHandler)({name:"routerErrorHandler",obj:t,chainLink:r}),(0,n.CreateObjectArray)({name:"middleware",arr:t.middleWareArr,chainLink:r}),(0,n.CreateArray)({name:"subRouter",obj:t.subRouters,chainLink:r}),(0,n.GetObjProps)(t))}},function(e){e.exports={name:"bliz",version:"0.1.1",bugs:{url:"https://github.com/yuraxdrumz/Bliz/issues",email:"yurik1776@gmail.com"},homepage:"https://github.com/yuraxdrumz/Bliz#readme",description:"A fast, declarative framework for writing web servers, no taradiddles",main:"./dist/main.bundle.js",scripts:{prettier:"prettier --write src/**/*.js",test:"jest",start:"webpack --mode development --watch",build:"webpack -p --progress --config=webpack.config.prod.js --mode production"},devDependencies:{"babel-core":"^6.25.0","babel-loader":"^7.1.1","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-polyfill":"^6.23.0","babel-preset-env":"^1.7.0",jest:"^21.2.1",prettier:"1.12.1","source-map-support":"^0.4.15",webpack:"^4.8.3","webpack-cli":"^2.1.4","webpack-node-server-plugin":"^0.2.1"},keywords:["http","server","express-like","web","sockets","graphql","declarative","simple"],repository:"yuraxdrumz/Bliz",author:"Yuri Khomyakov",license:"MIT",dependencies:{"apollo-cache-control":"^0.1.1","apollo-client-preset":"^1.0.8","apollo-link-http":"^1.5.4","apollo-server-module-graphiql":"^1.3.4","apollo-tracing":"^0.1.4","apollo-utilities":"^1.0.12",bluebird:"^3.5.1","body-parser":"^1.18.2",etag:"^1.8.1",eventemitter2:"^4.1.2",graphql:"^0.13.2","graphql-extensions":"0.0.10","graphql-subscriptions":"^0.5.8","graphql-tools":"^3.0.2","json-to-pretty-yaml":"^1.2.2","node-fetch":"^2.1.2","print-message":"^2.1.0","socket.io":"^2.1.0","subscriptions-transport-ws":"^0.9.9",superstruct:"^0.5.3",treeify:"^1.0.1",url:"^0.11.0",ws:"^5.2.0"}}},function(e,r){e.exports=require("babel-polyfill")}])});
//# sourceMappingURL=main.bundle.js.map